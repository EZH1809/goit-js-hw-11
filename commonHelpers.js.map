{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// функции для HTTP-запросов.\n\n\nconst URL = 'https://pixabay.com/api/';\nconst API_KEY = '42552421-44c442bdd9fc0080a82eeb482';\n\nfunction searchImages(query) {\n  const apiUrl = `${URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n    //отправка запроса\n\n return fetch(apiUrl)\n    .then((response) => {\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      return response.json();\n    })\n    .then((data) => data.hits)\n    .catch((error) => {\n      console.error('Error fetching images:', error);\n      throw error;\n    });\n}\n\nexport default searchImages;","// функции для отображения элементов интерфейса\n\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\n\nexport const renderGallery = (images) => {\n  const galleryContainer = document.getElementById('gallery');\n  galleryContainer.innerHTML = '';\n\n  if (images.length === 0) {\n    iziToast.info({\n      title: 'Info',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return;\n  }\n\n  images.forEach((image) => {\n    const card = createImageCard(image);\n    galleryContainer.appendChild(card);\n  });\n\n    const lightbox = new SimpleLightbox('.gallery-item' , {\n  captionsData: 'alt',\n  captionDelay: 250,\n  });\n    \n  lightbox.refresh();\n};\n\nconst createImageCard = (image) => {\n  const card = document.createElement('a'); \n  card.classList.add('gallery-item');\n    card.href = image.largeImageURL;\n    \n  const img = document.createElement('img');\n  img.src = image.webformatURL;\n  img.alt = image.tags;\n\n  const likes = document.createElement('span');\n  likes.textContent = `Likes: ${image.likes}`;\n\n  const views = document.createElement('span');\n  views.textContent = `Views: ${image.views}`;\n\n  const comments = document.createElement('span');\n  comments.textContent = `Comments: ${image.comments}`;\n\n  const downloads = document.createElement('span');\n  downloads.textContent = `Downloads: ${image.downloads}`;\n\n  card.appendChild(img);\n  card.appendChild(likes);\n  card.appendChild(views);\n  card.appendChild(comments);\n  card.appendChild(downloads);\n\n  return card;\n};\n","// логика работы приложения\n\nimport searchImages from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst loader = document.querySelector('.loader');\n\n// Определение функции clearGallery за пределами обработчика событий\nfunction clearGallery() {\n  const galleryContainer = document.getElementById('gallery');\n  galleryContainer.innerHTML = '';\n}\n\nsearchForm.addEventListener('submit', function (event) {\n  event.preventDefault();\n\n  const query = searchInput.value.trim();\n\n  if (query === '') {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term.',\n    });\n    return;\n  }\n\n  showLoader();\n\n // Вызов функции clearGallery перед новым поиском\n  clearGallery();\n\n  searchImages(query)\n    .then(images => renderGallery(images))\n    .catch(error => {\n      console.error('Error in search:', error);\n      searchInput.value = '';\n      clearGallery();\n      iziToast.error({\n        title: 'Error',\n        message: 'An error occurred while fetching images. Please try again.',\n      });\n    })\n    .finally(hideLoader);\n});\n\nconst showLoader = () => {\n  loader.style.display = 'block';\n};\n\nfunction hideLoader() {\n    loader.style.display = 'none';\n}\n\n"],"names":["URL","API_KEY","searchImages","query","apiUrl","response","data","error","renderGallery","images","galleryContainer","image","card","createImageCard","SimpleLightbox","img","likes","views","comments","downloads","searchForm","searchInput","loader","clearGallery","event","showLoader","hideLoader"],"mappings":"svBAGA,MAAMA,EAAM,2BACNC,EAAU,qCAEhB,SAASC,EAAaC,EAAO,CAC3B,MAAMC,EAAS,GAAGJ,CAAG,QAAQC,CAAO,MAAME,CAAK,2DAIhD,OAAO,MAAMC,CAAM,EACf,KAAMC,GAAa,CAClB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAE1D,OAAOA,EAAS,MACtB,CAAK,EACA,KAAMC,GAASA,EAAK,IAAI,EACxB,MAAOC,GAAU,CAChB,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACZ,CAAK,CACL,CCfO,MAAMC,EAAiBC,GAAW,CACvC,MAAMC,EAAmB,SAAS,eAAe,SAAS,EAG1D,GAFAA,EAAiB,UAAY,GAEzBD,EAAO,SAAW,EAAG,CACvB,SAAS,KAAK,CACZ,MAAO,OACP,QAAS,0EACf,CAAK,EACD,MACD,CAEDA,EAAO,QAASE,GAAU,CACxB,MAAMC,EAAOC,EAAgBF,CAAK,EAClCD,EAAiB,YAAYE,CAAI,CACrC,CAAG,EAEkB,IAAIE,EAAe,gBAAkB,CACxD,aAAc,MACd,aAAc,GAChB,CAAG,EAEQ,QAAO,CAClB,EAEMD,EAAmBF,GAAU,CACjC,MAAMC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,UAAU,IAAI,cAAc,EAC/BA,EAAK,KAAOD,EAAM,cAEpB,MAAMI,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAMJ,EAAM,aAChBI,EAAI,IAAMJ,EAAM,KAEhB,MAAMK,EAAQ,SAAS,cAAc,MAAM,EAC3CA,EAAM,YAAc,UAAUL,EAAM,KAAK,GAEzC,MAAMM,EAAQ,SAAS,cAAc,MAAM,EAC3CA,EAAM,YAAc,UAAUN,EAAM,KAAK,GAEzC,MAAMO,EAAW,SAAS,cAAc,MAAM,EAC9CA,EAAS,YAAc,aAAaP,EAAM,QAAQ,GAElD,MAAMQ,EAAY,SAAS,cAAc,MAAM,EAC/C,OAAAA,EAAU,YAAc,cAAcR,EAAM,SAAS,GAErDC,EAAK,YAAYG,CAAG,EACpBH,EAAK,YAAYI,CAAK,EACtBJ,EAAK,YAAYK,CAAK,EACtBL,EAAK,YAAYM,CAAQ,EACzBN,EAAK,YAAYO,CAAS,EAEnBP,CACT,ECxDMQ,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAS,SAAS,cAAc,SAAS,EAG/C,SAASC,GAAe,CACtB,MAAMb,EAAmB,SAAS,eAAe,SAAS,EAC1DA,EAAiB,UAAY,EAC/B,CAEAU,EAAW,iBAAiB,SAAU,SAAUI,EAAO,CACrDA,EAAM,eAAc,EAEpB,MAAMrB,EAAQkB,EAAY,MAAM,KAAI,EAEpC,GAAIlB,IAAU,GAAI,CAChB,SAAS,QAAQ,CACf,MAAO,UACP,QAAS,6BACf,CAAK,EACD,MACD,CAEDsB,IAGAF,IAEArB,EAAaC,CAAK,EACf,KAAKM,GAAUD,EAAcC,CAAM,CAAC,EACpC,MAAMF,GAAS,CACd,QAAQ,MAAM,mBAAoBA,CAAK,EACvCc,EAAY,MAAQ,GACpBE,IACA,SAAS,MAAM,CACb,MAAO,QACP,QAAS,4DACjB,CAAO,CACP,CAAK,EACA,QAAQG,CAAU,CACvB,CAAC,EAED,MAAMD,EAAa,IAAM,CACvBH,EAAO,MAAM,QAAU,OACzB,EAEA,SAASI,GAAa,CAClBJ,EAAO,MAAM,QAAU,MAC3B"}